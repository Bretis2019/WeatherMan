(()=>{const e=(new Date).getDay(),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=document.getElementsByClassName("date");for(let o=0;o<t.length;o++){const c=(e+o)%7;t[o].textContent=n[c]}const o="eb6d121d00a39d275b9af8c2b9905f64";let c=document.querySelector(".popup"),s=document.querySelector(".popup-background");document.querySelector(".rounded-box").addEventListener("click",(function(){c.style.display="block",s.style.display="block",s.addEventListener("click",(function(e){e.target===s&&(c.style.display="none",s.style.display="none")})),c.addEventListener("click",(function(e){e.stopPropagation()}))}));const a=document.getElementById("search-bar"),r=document.getElementById("autocomplete-list");function l(e,n,t,o){this.name=e,this.country=n,this.lat=t,this.lon=o}a.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),async function(){const e=a.value.toLowerCase();await async function(e){const n=`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=5&appid=${o}`;await fetch(n,{mode:"cors"}).then((e=>e.json())).then((e=>{!function(e){!function(e){e.forEach((e=>{const n=new l(e.name,e.country,e.lat,e.lon);d.push(n)}))}(e)}(e)})).catch((e=>{console.error("Error:",e)}))}(e),r.innerHTML="",d.forEach((function(e){const n=document.createElement("div");n.textContent=e.country,n.addEventListener("click",(function(){var n,t;a.value=e.name,document.querySelector(".text").innerText=e.name,r.innerHTML="",d=[],n=e.lat,t=e.lon,fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${n}&lon=${t}&units=metric&appid=${o}`,{mode:"cors"}).then((e=>e.json())).then((e=>{!function(e){const n=e.list[0],t=n.weather[0].main,o=n.main.feels_like;document.getElementById("description").innerText=t,document.getElementById("temp").innerText=Math.floor(o)+"Â°C",function(e){const n={};for(const t of e){const e=t.dt_txt.split(" ")[0],o=t.weather[0].main;n[e]||(n[e]={},u.push(e)),n[e][o]?n[e][o]++:n[e][o]=1}for(const e of u){let t=0,o="";for(const c in n[e]){const s=n[e][c];s>t&&(t=s,o=c)}p.push(o)}}(e.list);for(let e=0;e<u.length;e++)console.log(u[e],p[e]);(function(e){let n=document.querySelectorAll(".icon");switch(e){case"Thunderstorm":n[0].src="thunderT.png";break;case"Rain":case"Drizzle":n[0].src="rainT.png";break;case"Snow":n[0].src="snowT.png";break;case"Mist":case"Smoke":case"Haze":case"Dust":case"Fog":case"Sand":case"Ash":case"Squall":case"Tornado":n[i].src="misT.png";break;case"Clear":n[0].src="clearT.png";break;case"Clouds":n[0].src="cloudsT.png"}console.log(n),console.log(p);for(let e=1;e<=4;e++)m(e,n)})(t),c.style.display="none",s.style.display="none"}(e)})).catch((e=>{console.error("Error:",e)}))})),r.appendChild(n)}))}())}));let d=[];const u=[],p=[];function m(e,n){switch(p[e]){case"Thunderstorm":n[e].src="thunder.png";break;case"Rain":case"Drizzle":n[e].src="rain.png";break;case"Snow":n[e].src="snow.png";break;case"Mist":case"Smoke":case"Haze":case"Dust":case"Fog":case"Sand":case"Ash":case"Squall":case"Tornado":n[e].src="mist.png";break;case"Clear":n[e].src="clear.png";break;case"Clouds":n[e].src="clouds.png"}}})();